# API Documentation

_Generated by `npm run docs:generate`._

## src/components/todo-app.js

### `export class TodoApp extends LitElement {`

TodoApp - Main application component
Coordinates between Model and View components

### `constructor() {`

Creates a TodoApp.

### `disconnectedCallback() {`

Clean up subscriptions and timers when the element detaches.

### `firstUpdated() {`

Cache the container element and lock its height after first render.

### `requestConfirmation(message) {`

Requests confirmation from the user.
@param {string} message
@returns {boolean}

### `handleAddTodo(e) {`

Handles the add-todo event from the form.
@param {CustomEvent<{text: string}>} e

### `handleToggleTodo(e) {`

Handles checkbox changes from todo items.
@param {CustomEvent<{id: number}>} e

### `handleDeleteTodo(e) {`

Handles delete button events from todo items.
@param {CustomEvent<{id: number}>} e

### `handleUpdateTodo(e) {`

Handles save events from edited todo items.
@param {CustomEvent<{id: number, text: string}>} e

### `handleClearAll() {`

Clears the entire list after user confirmation.

### `render() {`

@returns {import('lit').TemplateResult}

### `scheduleAutoClear(id) {`

Removes a completed todo after a delay.
@param {number} id

### `cancelAutoClear(id) {`

Cancels a pending auto-clear for a given todo.
@param {number} id

### `cancelAllAutoClear() {`

Cancels all auto clear timers.

### `markPendingDeletion(id) {`

Marks a todo as pending deletion so the UI can show a spinner.
@param {number} id

### `unmarkPendingDeletion(id) {`

Removes the pending deletion state from a todo.
@param {number} id

## src/components/todo-form.js

### `export class TodoForm extends LitElement {`

TodoForm - Input form for adding new todos

### `constructor() {`

Creates an empty form.

### `handleSubmit(e) {`

Dispatches an add-todo event with the trimmed input text.
@param {SubmitEvent} e

### `handleInput(e) {`

Keeps the internal state in sync with the input value.
@param {InputEvent & { target: HTMLInputElement }} e

### `render() {`

@returns {import('lit').TemplateResult}

## src/components/todo-item.js

### `export class TodoItem extends LitElement {`

TodoItem - Individual todo item component

### `constructor() {`

Sets default state for an item.

### `handleToggle() {`

Emits toggle-todo for this todo.

### `handleDelete() {`

Emits delete-todo for this todo.

### `handleEdit() {`

Enters edit mode with the current todo text.

### `handleSave() {`

Emits update-todo with the edited value when non-empty.

### `handleCancel() {`

Leaves edit mode without saving changes.

### `handleEditInput(event) {`

Tracks the value typed into the edit field.
@param {InputEvent & { target: HTMLInputElement }} event

### `handleKeyDown(e) {`

Supports keyboard shortcuts while editing.
@param {KeyboardEvent} e

### `render() {`

@returns {import('lit').TemplateResult}

## src/components/todo-list.js

### `export class TodoList extends LitElement {`

TodoList - Displays a list of todos

### `constructor() {`

Initializes empty list data.

### `updated(changedProperties) {`

Auto scrolls to the bottom when new todos are added.
@param {Map<string, unknown>} changedProperties

### `render() {`

@returns {import('lit').TemplateResult}

## src/models/todo-model.js

### `export class TodoModel {`

TodoModel - Manages the todo list data and business logic.
Implements the Observer pattern for reactive updates.

### `constructor(storageService) {`

@param {import('../services/storage-service.js').StorageService} storageService

### `subscribe(listener) {`

Subscribe to model changes and get an unsubscribe callback.
@param {() => void} listener
@returns {() => void}

### `notify() {`

Notifies all registered listeners.
@returns {void}

### `addTodo(text) {`

Adds a new todo when the text is non-empty.
@param {string} text
@returns {boolean}

### `toggleComplete(id) {`

Toggles completion and tracks lifetime completed count.
@param {number} id
@returns {boolean}

### `deleteTodo(id) {`

Deletes a todo by id.
@param {number} id
@returns {boolean}

### `updateTodo(id, newText) {`

Updates todo text when the trimmed text is non-empty.
@param {number} id
@param {string} newText
@returns {boolean}

### `clearCompleted() {`

Removes only completed todos.
@returns {boolean}

### `clearAll() {`

Clears every todo and resets counters.
@returns {boolean}

### `get activeCount() {`

Gets the count of active (incomplete) todos.
@returns {number}

### `get completedCount() {`

Gets the lifetime completed count.
@returns {number}

### `#commit(didChange) {`

@param {boolean} didChange
@returns {boolean}

### `#persist() {`

Persists current state to storage.
@returns {void}

## src/services/storage-service.js

### `export class StorageService {`

StorageService - Handles localStorage operations for the TODO app.
Gracefully degrades when localStorage is unavailable (e.g. during tests).

### `constructor(storageKey = 'todos', storage = getBrowserStorage()) {`

@param {string} [storageKey]
@param {Storage|null} [storage]

### `save(key, data) {`

Saves data to localStorage using the service prefix.
@param {string} key
@param {unknown} data
@returns {void}

### `load(key, defaultValue = null) {`

Loads JSON data from localStorage.
@template T
@param {string} key
@param {T} [defaultValue]
@returns {T}

### `remove(key) {`

Removes a single key from localStorage.
@param {string} key
@returns {void}

### `clear() {`

Removes all keys belonging to this app from storage.
@returns {void}

### `#buildKey(keySuffix) {`

@param {string} keySuffix
@returns {string}
